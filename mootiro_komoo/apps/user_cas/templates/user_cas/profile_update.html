{% extends 'global.html' %}

{% load i18n %}
{% load komoo_tags %}
{% load crispy_forms_tags %}
{% load upload_tags %}

{% block content %}

<div id="main-content" class="user-profile-edit-container">
    <div class="main-column">
        <!-- tab navigation -->
        <ul class="nav nav-tabs">
            <li><a href="#tab-pane-personal" data-toggle="tab">Personal Settings</a></li>
            <li class="active"><a href="#tab-pane-public" data-toggle="tab">Public Settings</a></li>
            <li><a href="#tab-pane-signatures" data-toggle="tab">Signatures</a></li>
        </ul>

        <!-- tab content section -->
        <div class="tab-content">

            <!-- Tab pane personal settings -->
            <div class="tab-pane" id="tab-pane-personal">

                <!-- Personal settins form -->
                <div class="form-profile-wrapper">
                    <form methos=POST action="{% url profile_update_personal_settings %}" id="form-personal">
                        {% csrf_token %}
                       	<div id="div_id_username" class="clearfix control-group ">
                            <label for="id_username">Nome de Usuário</label>
                            <div class="controls">
                                <input id="id_username" type="text"
                                       class="textinput textInput"
                                       value="{{ user.username }}"
                                       name="username" />
                            </div>
                        </div>

                        <div class="clearfix control-group">
                            <label for="id_email">Email</label>
                            <div class="controls">
                                <input class="textinput textInput"
                                       type="text" id="id_email"
                                       value="{{ user.email }}"
                                       name="email" disabled='true' />
                            </div>
                        </div>

                        <div class="form-actions">
                            <input type="submit" name="submit" value="Enviar"
                                   class="btn button" id="submit-id-submit" />
                        </div>


                    </form>
                </div>
            </div><!-- end of tab pane personal settings -->


            <!-- Tab pane public settings -->
            <div class="tab-pane active" id="tab-pane-public">
                <div class="form-profile-wrapper">
                    {% crispy form_profile form_profile.helper %}
                </div>
            </div>


            <!-- Tab pane signatures -->
            <div class="tab-pane div-profile-form" id="tab-pane-signatures">
                SIGNATURES
            </div> <!-- end of signatures tab pane -->

        </div><!-- end of tab content-->
    </div>
</div>

<script type="text/template" id="form-message-box">
    <div class="alert alert-info form-message-box" style="display: none;" data-alert="info">
        <a class="close">×</a>
        <div class="msg"><%= msg %></div>
    </div>
</script>
{% endblock %}

{% block css %}

{% endblock %}

{% block page_scripts %}
    {{ form_profile.media }}
    {% load_files user.profile %}

    <!-- lib section -->
    <script src="{{STATIC_URL}}lib/underscore-min.js" type="text/javascript"></script>
    <script src="{{STATIC_URL}}lib/backbone-min.js" type="text/javascript"></script>

    <!-- load json's on komoo namespace -->
    <script type="text/javascript">
        if (typeof KomooNS == 'undefined') KomooNS = {};
        KomooNS.signatures = {{signatures|jsonify|safe}};
    </script>

    <!-- our code =D-->
    <script src="{{STATIC_URL}}js/profile_update.js" type="text/javascript"></script>
{% endblock %}
