{% extends 'global.html' %}

{% load i18n %}
{% load komoo_tags %}
{% load komoo_map_tags %}
{% load markitup_tags %}

{% block content %}

<div class="profile-container">

    <!-- profile left pane -->
    <div class="profile-left-pane">

        <!-- profile header (name and edit button) -->
        <div class="profile-lp-header">
            <span class="profile-lp-header-username">{% firstof user_profile.profile.public_name user_profile.get_full_name user_profile.username %}</span>
            {% if user.id == user_profile.id %}
            <a href="{% url profile_update %}" class="btn profile-lp-header-edit-btn">
                <i class="icon-pencil"></i>
            </a>
            {% endif %}
        </div>

        <!-- User photo -->
        <div class="profile-lp-photo">
            <div style="width:95%; height:200px; background-color: #cccccc; border-radius:4px; text-align:center;"> placeholder </div>
        </div>

        <!-- user contact info -->
        <div class="profile-lp-contact">
            <div class="profile-lp-contact-header">{% trans 'Public Contact' %}</div>
            {% if user.profile.contact %}
                {{ user_profile.profile.contact|render_markup|safe }}
            {% else %}
                {% trans 'Information Not Provided!' %}
            {% endif %}
        </div>

        <!-- map info section -->
        <div class="profile-lp-map-actions">

        </div>

    </div> <!-- End of profile left pane -->


    <div class="profile-central-pane">

    </div>
</div>


    <!-- Templates section -->

    <script type="text/template" id="contribution-template">
        <div class="inline-block contribution-image">
            <img src="<%= imageName() %>" alt="Image" />
        </div>
        <div class="inline-block contribution-content">
            <div class="contribution-header">
                <a href="<%= permalink %>" class="contribution-title"><%= name %></a>
                <div class="right">
                    <a href="#" class="preview-on-map-ajax <% if (!has_geojson) { %>disabled<% } %>" data-app-name="<%= app_name %>" data-model-name="<%= model_name %>" data-object-id="<%= id %>">
                        <i class="icon-see-on-map"></i>
                    </a>
                </div>
            </div>
            <div class="contribution-body">
                <%= actionDesc() %>
            </div>
        </div>
    </script>

    <script type="text/template" id="contributions-template">
        <div class="profile-cp-header"><span>{% trans 'last contributions' %}</span></div>
        <div class="profile-cp-contributions">

        </div>
    </script>
{% endblock %}

{% block css %}

{% endblock %}

{% block page_scripts %}


    <!-- Javascript section -->
    <script src="{{ STATIC_URL}}lib/underscore-min.js" type="text/javascript"></script>
    <script src="{{STATIC_URL}}lib/backbone-min.js" type="text/javascript"></script>

    <script type="text/javascript">
        if (typeof window.KomooNS == 'undefined' ) window.KomooNS = {};
        KomooNS.contributions = {{ contributions|jsonify|safe }};
    </script>

    <script src="{{ STATIC_URL }}js/profile.js" type="text/javascript"></script>
    {% komoo_map_tooltip %}
{% endblock %}

