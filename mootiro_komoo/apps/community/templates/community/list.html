{% extends "global.html" %}
{% load komoo_tags %}
{% load comment_tags %}
{% load markitup_tags %}
{% load i18n %}

{% block title %}{% trans 'Communities list' %}{% endblock %}

{% block menu %} {% menu "" "community" %} {% endblock %}

{% block content %}
<div id="main-content">
  <div class="highlight">
    <div class="list">
      <div class="view-list-top">
        <div class="view-list-count">
          {% blocktrans count counter=communities_count %}{{ counter }} Community{% plural %}{{ counter }} Communities{% endblocktrans %}
        </div>
        <div class="view-list-pagination">
          {% pagination communities %}
        </div>

        {% visualization_opts 'community' "sorters=['name','creation_date']" %}
      </div>

      {% for community in communities.object_list %}
      <div class="view-list-item {% cycle 'odd' '' %}">
        <h4>
          <span class="apart">
            <a href="{% url view_community community.slug %}">{{ community.name }}</a>
          </span>
          <a href="{% url community_on_map community.slug %}">{% trans 'see on the map' %}</a>
          <div class="clear-both"></div>
          {% comments_summary community %}
        </h4>
        <p class="clearBoth">
          {% trans 'population:' %} {% firstof community.population '-' %}
        </p>
        <p class="mark-down">{{ community.description|render_markup }}</p>

        <div class="view-list-footer">
          <!-- <div class="view-list-item-tags">
            {#% taglist community %#}
          </div> -->
          <div class="created-by">
            {% trans 'created by' %}
            <strong>
              {% firstof community.creator.get_full_name community.creator.username 'someone' %}
            </strong>
            {% trans 'at' %}
            <strong>{{ community.creation_date }}</strong>
          </div>
        </div>

      </div>
      {% endfor %}
    </div>
  </div>
  {% pagination communities %}
</div>
{% endblock %}

{% block page_scripts %}
  {% visualization_opts_js %}
{% endblock %}
