(function(){var e=Object.prototype.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define(["require","underscore","backbone","core/page_manager","./pages","./models"],function(e){var n,r,i,s,o,u;return u=e("underscore"),n=e("backbone"),s=e("core/page_manager"),o=e("./pages"),r=e("./models").User,i=function(e){function i(){i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.routes={"users(/)":"user","users/:id(/)":"detail","users/:id/edit(/)":"edit"},i.prototype.initialize=function(){return u.bindAll(this),this.bindExternalEvents()},i.prototype.bindExternalEvents=function(){return n.on("open:detail",this.detail),n.on("open:edit",this.edit)},i.prototype.goTo=function(e,t){var r=this;return $.when(s.canClose()).done(function(){return r.navigate(e),$.when(t.render()).fail(function(e){return n.trigger("error",e.status,e.statusText)})})},i.prototype.user=function(){},i.prototype.getUser=function(e){if(e==null){typeof console!="undefined"&&console!==null&&console.log("User id not specified");return}if(u.isNumber(e)||u.isString(e))e=new r({id:e});return e instanceof r?e:null},i.prototype.detail=function(e){var t;return t=this.getUser(e),this.goTo("users/"+t.id,new o.Profile({model:t}))},i.prototype.edit=function(e){var t;return t=this.getUser(e),this.goTo("users/"+t.id+"/edit",new o.Edit({model:t}))},i}(n.Router),new i})}).call(this);