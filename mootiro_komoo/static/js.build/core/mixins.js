(function(){define(["require","underscore","text!templates/core/_edit_overlay.html"],function(e){var t,n,r;return r=e("underscore"),n={defaultPermissions:{view:!0,edit:!0},hasPermission:function(e,t){var n,i,s;return n=(i=(s=this.permissions)!=null?s[e]:void 0)!=null?i:this.defaultPermissions[e],n?(r.isFunction(n)&&(t==null&&(t=KomooNS.user),n=n.apply(this,[t])),n):!1}},t={_overlayTemplate:r.template(e("text!templates/core/_edit_overlay.html")),setMode:function(e){var t;return this.mode=e!=null?e:(t=this.options.mode)!=null?t:"show",this.mode==="edit"?this.showOverlay():this.hideOverlay()},showOverlay:function(e){return e==null&&(e=i18n("Edit this")),this._overlay==null&&(this._overlay=$(this._overlayTemplate({msg:e}))),this.$el.append(this._overlay.css({marginTop:this.$el.height()*-1,height:this.$el.height()}))},hideOverlay:function(){var e;return(e=this._overlay)!=null?e.detach():void 0}},{PermissionMixin:n,EditOverlayMixin:t}})}).call(this);