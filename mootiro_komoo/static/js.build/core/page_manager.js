(function(){define(["require","jquery","underscore"],function(e){var t,n,r,i;return t=e("jquery"),i=e("underscore"),n=function(){function e(e){e==null&&(e={}),this.views=[{name:"actionBar",parentSelector:"#action-bar"},{name:"sidebar",parentSelector:"#sidebar"},{name:"mainContent",parentSelector:"#main-content"}],this.setViews(e)}return e.prototype.setViews=function(e){var t,n,r,i,s;i=this.views,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],t.instance!=null&&this._removeView(t.instance),s.push(t.instance=e[t.name]);return s},e.prototype.open=function(){var e,n,r,i,s,o,u;e=function(t){var n,r,i,s;if(!t)return;if(t.subViews){s=t.subViews;for(r=0,i=s.length;r<i;r++)n=s[r],e(n)}return typeof t.onOpen=="function"?t.onOpen():void 0},s=this.views,u=[];for(r=0,i=s.length;r<i;r++)n=s[r],t(n.parentSelector).append((o=n.instance)!=null?o.$el:void 0),u.push(e(n.instance));return u},e.prototype.canClose=function(){var e,t,n,r,i,s,o;e=!0,i=this.views;for(n=0,r=i.length;n<r;n++)t=i[n],e=(s=e&&((o=t.instance)!=null?typeof o.canClose==="function"?o.canClose():void 0:void 0))!=null?s:!0;return e},e.prototype._removeView=function(e){var t,n,r,i,s,o,u;if(!e)return;if(e.subViews){if(e.subViews){o=e.subViews;for(n=0,i=o.length;n<i;n++)t=o[n],this._removeView(t)}e.subViews=void 0;if(e.instances){u=e.instances;for(r=0,s=u.length;r<s;r++)t=u[r],this._removeView(t)}e.instances=void 0}return typeof e.onClose=="function"&&e.onClose(),e.unbind(),e.remove(),e.$el=void 0,e.el=void 0,e.model=void 0,e.collection=void 0},e.prototype.close=function(){var e,t,n,r,i;r=this.views,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(this._removeView(e.instance));return i},e}(),r=function(){function e(){}return e.prototype.Page=n,e.prototype.currentPage=null,e.prototype.canClose=function(){var e,n,r;return e=new t.Deferred,((n=(r=this.currentPage)!=null?typeof r.canClose==="function"?r.canClose():void 0:void 0)!=null?n:!0)?e.resolve():window.confirm("You haven't saved your changes yet. Do you want to leave without finishing?")?e.resolve():e.reject(),e.promise()},e.prototype.open=function(e){if(!e||e===this.currentPage)return;return this.close(this.currentPage),this.currentPage=e,this.currentPage.open()},e.prototype.close=function(e){if(!e)return;e.close();if(this.currentPage===e)return this.currentPage=null},e}(),new r})}).call(this);