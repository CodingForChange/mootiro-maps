(function(){var e=Object.prototype.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define(["require","jquery","underscore","backbone","text!templates/widgets/_modal_box.html"],function(e){var n,r,i,s,o,u,a;return n=e("jquery"),a=e("underscore"),r=e("backbone"),u=e("text!templates/widgets/_modal_box.html"),o=function(e){var t;if(!n('link[href="'+e+'"]').length)return typeof console!="undefined"&&console!==null&&typeof console.log=="function"&&console.log("Loading css: ",e),t=document.createElement("link"),t.type="text/css",t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)},i=function(e){function r(){r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.template=a.template(u),r.prototype.events={"click .close":"close","click .modal-bg":"close"},r.prototype.initialize=function(){var e;return a.bindAll(this),this.tpl_args=a.extend({tile:"",modal_id:"modal-box"},this.options),this.content=(e=this.options.content)!=null?e:"",this.options.width&&(this.width=this.options.width),this.render()},r.prototype.render=function(){var e;return e=this.template(this.tpl_args),this.$el.html(e),n("body").append(this.el),this.$el.find(".content").append(this.content),this.modal=this.$el.find("#"+this.tpl_args.modal_id),this.width!=null&&this.modal.find(".dialog").css("width",this.width),this},r.prototype.open=function(){return this.modal.fadeIn(),this.trigger("open"),this.isOpen=!0,this},r.prototype.close=function(){return this.modal.fadeOut(),this.isOpen&&(this.isOpen=!1,this.trigger("close")),this},r}(r.View),s=function(e,t,r,i){var s;return this.tabs=e,this.contents=t,this.selectedClass=i||"selected",this.onChange=r||function(e){return{}},n(t).hide(),s=this,n(e).click(function(){return s.to(this),!1}),this.length=n(e).length,this.to(n(e)[0]),this.initialized=!0},s.prototype.to=function(e){var t;n(this.tabs).removeClass(this.selectedClass),n(this.contents).removeClass(this.selectedClass).hide(),t=n(e).attr("href")||n(e).children().attr("href"),n("*[href="+t+"]").parent().addClass(this.selectedClass),n(t).addClass(this.selectedClass).show(),this.current=e;if(this.onChange&&this.initialized)return this.onChange(this)},s.prototype.getCurrentTabIndex=function(){return n(this.tabs).index(this.current)},{loadCss:o,ModalBox:i,Tabs:s}})}).call(this);