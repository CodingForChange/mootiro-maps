(function(){var e=Object.prototype.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define(["require","jquery","underscore","backbone","text!templates/main/_upper_bar.html","text!templates/main/_header.html","text!templates/main/_footer.html"],function(e){var n,r,i,s,o,u,a;return n=e("jquery"),a=e("underscore"),r=e("backbone"),i=function(e){function n(){n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.tagName="span",n.prototype.className="feedback",n.prototype.initialize=function(){return this.$el.hide()},n.prototype.display=function(e){var t,n=this;return this.$el.html(e),(t=this.delayed)!=null?t:this.delayed=setTimeout(function(){return n.$el.css({display:"inline"})},100)},n.prototype.close=function(){return clearTimeout(this.delayed),this.delayed=null,this.$el.fadeOut()},n}(r.View),u=function(n){function i(){i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.events={"click .login":"login","click .logout":"logout","click .user":"profile"},i.prototype.initialize=function(){var t;return t=e("text!templates/main/_upper_bar.html"),this.template=a.template(t),a.bindAll(this),this.render()},i.prototype.render=function(){var e;return e=this.template(),this.$el.html(e),this},i.prototype.login=function(){return r.trigger("auth::loginRequired",window.location.href),!1},i.prototype.logout=function(){return r.trigger("auth::logout",window.location.href),!1},i.prototype.profile=function(){return r.trigger("user::profile",KomooNS.user.id),!1},i}(r.View),o=function(n){function i(){i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.events={"click .logo a":"root"},i.prototype.initialize=function(){var t;return t=e("text!templates/main/_header.html"),this.template=a.template(t),this.upperBar=new u,a.bindAll(this),this.render()},i.prototype.render=function(){var e;return e=this.template(),this.$el.html(e),this.$el.find("#upper-bar-container").append(this.upperBar.$el),this},i.prototype.root=function(){return r.trigger("main::root"),!1},i}(r.View),s=function(n){function r(){r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.events={},r.prototype.initialize=function(){var t;return t=e("text!templates/main/_footer.html"),this.template=a.template(t),a.bindAll(this),this.render()},r.prototype.render=function(){var e;return e=this.template(),this.$el.html(e),this},r}(r.View),{Header:o,Footer:s,UpperBar:u,Feedback:i}})}).call(this);