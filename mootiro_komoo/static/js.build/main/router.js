(function(){var e=Object.prototype.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define(["require","underscore","backbone","app","core/page_manager","./pages"],function(e){var n,r,i,s,o,u;return u=e("underscore"),n=e("backbone"),i=e("app"),s=e("core/page_manager"),o=e("./pages"),r=function(e){function n(){n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.routes={"":"root"},n.prototype.initialize=function(){return u.bindAll(this),this.bindExternalEvents()},n.prototype.bindExternalEvents=function(){return i.on("open:root",this.root),i.on("open:error",this.error)},n.prototype.goTo=function(e,t){var n=this;return $.when(s.canClose()).done(function(){return n.navigate(e),$.when(t.render()).fail(function(e){return i.trigger("open:error",e.status,e.statusText)})})},n.prototype.root=function(){return this.goTo("",o.root)},n.prototype.error=function(e,t){return o.error.render(),alert(""+e+" "+t+" <TODO: render the error page>")},n}(n.Router),r})}).call(this);