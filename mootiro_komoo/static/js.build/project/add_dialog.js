define(["jquery","underscore","backbone","project/model","widgets/autocomplete","text!templates/project/_add_dialog.html"],function(e,t,n,r,i,s){var o,u;return u=i.extend({inputName:"project",autocompleteSource:"/project/search_by_name",className:"project_autocomplete"}),o=n.View.extend({events:{"click .save":"onSaveBtnClick","click .cancel":"onCancelBtnClick"},initialize:function(){var e=this;return t.bindAll(this,"render"),this.template=t.template(s),this.autocomplete=(new u).render(),this.autocomplete.$input.on("autocompleteselect",function(t,n){return e.onProjectSelected(n.item)})},open:function(){return e("body").append(this.$el),this.$(".dialog").modal("show"),this},close:function(){return this.$(".dialog").modal("hide"),this},clear:function(){return this.autocomplete.clear(),this.$(".msg").html(""),this.$(".save").addClass("disabled"),this},onCancelBtnClick:function(){return this.close(),!1},onSaveBtnClick:function(){var e,t,n=this;return this.$(".save").hasClass("disabled")&&!1,t=this.autocomplete.val(),t&&(e=new r.Project({id:t}),e.fetch(),e.addObject(this.model).done(function(e){return n.trigger("saved",e)}).fail(function(e,t){return n.trigger("failed",e,t)})),!1},onProjectSelected:function(e){return this.$(".msg").html("<p>Este objeto ser√° adicionado ao projeto <strong> "+e.label+" </strong></p>"),this.$(".save").removeClass("disabled")},render:function(){var e,t=this;return e=this.template(),this.$el.html(e),this.$(".project-selector").append(this.autocomplete.$el),this.$(".dialog").on("hide",function(){return t.clear()}),this}})})