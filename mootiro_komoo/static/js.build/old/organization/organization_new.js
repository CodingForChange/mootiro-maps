var change_msg=function(e){$("#org-div-progress .alert").is(":hidden")&&$("#org-div-progress .alert").slideDown();var t=$("#org-div-progress .alert .msg");t.fadeOut("100",function(){t.html(e),t.fadeIn("100")})},change_percent=function(e){$("#org-div-progress .percent").html(e+"% "+gettext("complete"))},change_step=function(e){var t,n;for(var r=1;r<5;r++)$(".step_"+r).hide();$(".step_"+e).show(),t=Math.round(e*33.33-33.33),$(".progress .bar").css("width",""+t+"%"),e===1?($(".step_1_row_1").show(),$(".step_1_row_2").hide(),$(".step_1_row_3").hide()):e===4&&change_msg(gettext("Congratulations, you have concluded the organization/branch addition process")),change_percent(t),window.scrollTo(0,0)};require(["jquery","utils"],function(e){e(function(){change_step(1),change_msg(gettext("Provide the organization name so we can verify if it's already registered on our system")),e("a.close").click(function(){e(this).parent().slideUp()}),e("#name_verify").click(function(){e.post("/organization/verify_name/",{org_name:e("#id_org_name_autocomplete").val()},function(t){var n,r;t.exists?(change_msg(gettext("This organization already exists. Do you want to add a branch?")),e(".step_1_row_1").hide(),e(".step_1_row_2").show(),e("#form_branch #id_branch_organization").val(t.id),e("#btn_concluir").attr("id",t.id)):(change_msg(gettext("This organization is not registered yet. Do you want to add this organization?")),e(".step_1_row_1").hide(),e(".step_1_row_3").show())},"json")}),e("#btn_add_filial").click(function(){change_step(3),change_msg(gettext("Enter with the data from the branch you have marked on map"));var t=e("#id_org_name_autocomplete").val();e("#id_filial_org_name").val(t)}),e("#btn_add_org").click(function(){change_step(2),change_msg(gettext("Enter with the data from the Organization which owns the branch you have marked on map."));var t=e("#id_org_name_autocomplete").val();e("#form_organization #id_name").val(t),e("#id_filial_org_name").val(t)}),e(".step_1_cancel").click(function(){change_step(1),change_msg(gettext("Provide the organization name so we can verify if it's already registered on our system"))}),e("#btn_concluir").click(function(){var t=e(this).attr("id");url=dutils.urls.resolve("view_organization",{id:t}),window.location.pathname=url})})});