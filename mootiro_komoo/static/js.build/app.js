(function(){define(["require","i18n","jquery","backbone","user/models"],function(e){var t,n,r;return r=e("i18n"),t=e("jquery"),n=e("backbone"),t("body").prepend(t('<div id="fb-root" />')),e(["main/views"],function(r){var i,s,o,u,a;return s=new r.Feedback,t("#feedback-container").append(s.$el),a=0,n.on("app::working",function(e){return a++,s.display("Working...")}),n.on("app::done",function(e){if(--a===0)return s.close()}),n.trigger("app::working"),i=e("user/models").User,KomooNS.isAuthenticated?KomooNS.user=new i(KomooNS.user_data):KomooNS.user=new i({}),u=new r.Header({el:"#header-container",model:KomooNS.user}),o=new r.Footer({el:"#footer-container"})}),t(function(){return e(["main/router","authentication/router","user/router"],function(){return n.history.start({pushState:!0,root:"/"}),n.trigger("app::done")}),e(["analytics"],function(e){return e.init()})}),n.on("map::see-on-map",function(e){return typeof console!="undefined"&&console!==null?console.log("I should display this geojson on map:",e.get("geojson")):void 0})})}).call(this);