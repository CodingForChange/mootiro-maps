(function(){define(["require","i18n","jquery","backbone","user/models"],function(e){var t,n,r;return r=e("i18n"),t=e("jquery"),n=e("backbone"),e(["main/views"],function(r){var i,s,o,u,a;return s=new r.Feedback,t("#feedback-container").append(s.$el),a=0,n.on("app::working",function(e){return a++,console.log("a",a),s.display("Working...")}),n.on("app::done",function(e){console.log("b");if(--a===0)return s.close()}),n.trigger("app::working"),i=e("user/models").User,u=new r.Header({el:"#header-container",model:new i(KomooNS.user)}),o=new r.Footer({el:"#footer-container"})}),e(["main/router","authentication/router","user/router"],function(){return t(function(){return n.history.start({pushState:!0,root:"/"}),n.trigger("app::done")})}),e(["analytics"],function(e){return e.init()}),e(["facebook-jssdk"],function(e){return e.init(typeof KomooNS!="undefined"&&KomooNS!==null?KomooNS.facebookAppId:void 0)}),n.on("map::see-on-map",function(e){return typeof console!="undefined"&&console!==null?console.log("I should display this geojson on map:",e.get("geojson")):void 0}),{start:function(t,n){if(t!=null)return e([t],function(e){return e!=null?typeof e.start=="function"?e.start(n):void 0:void 0})}}})}).call(this);